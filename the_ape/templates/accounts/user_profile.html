{% extends 'base.html' %}
{% load page_tags %}

{% block title %}{{ user.first_name }}'s page | The Ape{% endblock %}

{% block content %}
	<div class="gallery">
		<div class="widget-header">
	        <h2 class="widget-title">Profile</h2>
	    </div>
		<div class="user-profile-info">
			<span><b>Name:</b> {{ user.first_name }}&nbsp;{{ user.last_name }}</span>
			<span><b>Email:</b> {{ user.email }}</span>
			<span><b>Date joined:</b> {{ user.date_joined.date }}</span>
		</div>
	</div>
	<div class="gallery">
		<div class="widget-header">
	        <h2 class="widget-title">Shows</h2>
	    </div>
		<div class="user-profile-shows">
			<table title="My shows">
				<tr>
					<th>Show</th>
					<th>Start Time</th>
					<th>Ticket</th>
				</tr>
				{% for show in user.profile.shows.all %}
					<tr>
						<td>{{ show.name }}</td>
						<td>{{ show.event_day|safe }}, {{ show.event_time }}</td>
						<td><a target="_blank" href="{{ show.id|ticket_link:user.profile.id }}">View</a></td>
					</tr>
				{% endfor %}
				{% if not user.profile.shows.exists %}
					<tr>
						<td></td><td>Shows you purchase tickets for will show up here.</td>
					</tr>
				{% endif %}
			</table>
		</div>
	</div>
	<div class="gallery">
		<div class="widget-header">
	        <h2 class="widget-title">Classes</h2>
	    </div>
		<div class="user-profile-classes">
			<table title="My classes">
				<tr>
					<th>Class</th>
					<th>Start Date</th>
					<th>Registration</th>
				</tr>
				{% for class in user.profile.classes.all %}
					<tr>
						<td>{{ class.name }}</td>
						<td>{{ class.start_day }}</td>
						<td><a target="_blank" href="{{ class.id|class_registration_link:user.profile.id }}">View</a></td>
					</tr>
				{% endfor %}
				{% if not user.profile.classes.exists %}
					<tr>
						<td></td>
						<td>Classes you register for will show up here.</td>
					</tr>
				{% endif %}
			</table>
		</div>
	</div>
{% endblock %}